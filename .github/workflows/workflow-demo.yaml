name: workflow-demo

on: pull_request

jobs:
  build:
    runs-on: aliyun
    container:
      image: ubuntu:latest
    services:
      docker:
        image: docker:dind
        # 通过 options 传递特权模式参数
        options: --privileged
        ports:
          - 2375:2375
    steps:
      - name: Install Docker
        run: |
          apt-get update
          apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
      - name: Test Docker
        run: |
          docker version
          docker info
